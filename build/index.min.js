!function(){"use strict";const t={appToggle:!1,opacity:.5,currentTab:0,paddingColor:"#D8A658",marginColor:"#58CFD8",tagnames:{HTML:!0,BODY:!0,ADDRESS:!0,ARTICLE:!0,ASIDE:!0,FOOTER:!0,HEADER:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HGROUP:!0,MAIN:!0,NAV:!0,SECTION:!0,SEARCH:!0,BLOCKQUOTE:!0,DD:!0,DIV:!0,DL:!0,DT:!0,FIGCAPTION:!0,FIGURE:!0,HR:!0,LI:!0,MENU:!0,OL:!0,P:!0,PRE:!0,UL:!0,A:!0,ABBR:!0,B:!0,BDI:!0,BDO:!0,BR:!0,CITE:!0,CODE:!0,DATA:!0,DFN:!0,EM:!0,I:!0,KBD:!0,MARK:!0,Q:!0,RP:!0,RT:!0,RUBY:!0,S:!0,SAMP:!0,SMALL:!0,SPAN:!0,STRONG:!0,SUB:!0,SUP:!0,TIME:!0,U:!0,VAR:!0,WBR:!0,AREA:!0,AUDIO:!0,IMG:!0,MAP:!0,TRACK:!0,VIDEO:!0,EMBED:!0,IFRAME:!0,OBJECT:!0,PICTURE:!0,PORTAL:!0,SOURCE:!0,SVG:!0,MATH:!0,CANVAS:!0,NOSCRIPT:!0,DEL:!0,INS:!0,CAPTION:!0,COL:!0,COLGROUP:!0,TABLE:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TR:!0,BUTTON:!0,DATALIST:!0,FIELDSET:!0,FORM:!0,INPUT:!0,LABEL:!0,LEGEND:!0,METER:!0,OPTGROUP:!0,OPTION:!0,OUTPUT:!0,PROGRESS:!0,SELECT:!0,TEXTAREA:!0,DETAILS:!0,DIALOG:!0,SUMMARY:!0,SLOT:!0,TEMPLATE:!0,"CUSTOM ELEMENTS":!0}};class e{constructor(t,e,o){this.ele=t,this.marginColor=e,this.paddingColor=o}overlay=document.createElement("div");margin=document.createElement("div");padding=document.createElement("div");infoOverlay=document.createElement("div");updateOverlayPosition(){const{scrollY:t,scrollX:e}=window,o=this.ele.getBoundingClientRect();this.overlay.style.top=`${o.top+t}px`,this.overlay.style.left=`${o.left+e}px`}createOverlayStyles(){const t=window.getComputedStyle(this.ele),e=this.ele.getBoundingClientRect();let o=.3*e.height;this.infoOverlay.classList.add("layoutlens__info-overlay"),this.infoOverlay.innerText=`${this.ele.tagName}`,this.overlay.appendChild(this.infoOverlay);const i={top:t.paddingTop,bottom:t.paddingBottom,left:t.paddingLeft,right:t.paddingRight},s={top:t.marginTop,bottom:t.marginBottom,left:t.marginLeft,right:t.marginRight};this.padding.style.borderBottom=`${i.bottom} solid ${this.paddingColor}`,this.padding.style.borderTop=`${i.top} solid ${this.paddingColor}`,this.padding.style.borderLeft=`${i.left} solid ${this.paddingColor}`,this.padding.style.borderRight=`${i.right} solid ${this.paddingColor}`,this.padding.style.borderRadius=`${t.borderRadius}`,this.margin.style.borderBottom=`${s.bottom} solid ${this.marginColor}`,this.margin.style.borderTop=`${s.top} solid ${this.marginColor}`,this.margin.style.borderLeft=`${s.left} solid ${this.marginColor}`,this.margin.style.borderRight=`${s.right} solid ${this.marginColor}`,this.margin.style.top=`-${s.top}`,this.margin.style.left=`-${s.left}`,this.overlay.style.width=`${e.width}px`,this.overlay.style.height=`${e.height}px`,this.overlay.style.fontSize=`${o}px`,this.overlay.style.borderRadius=`${t.borderRadius}`}createOverlay(){let t="";return this.ele.classList.forEach((e=>t+=`${e} `)),this.ele.id&&this.overlay.setAttribute("data-id",this.ele.id),t&&this.overlay.setAttribute("data-class",t),this.overlay.setAttribute("aria-hidden","true"),this.overlay.classList.add("layoutlens__overlay"),this.margin.classList.add("layoutlens__margin"),this.padding.classList.add("layoutlens__padding"),this.overlay.appendChild(this.margin),this.overlay.appendChild(this.padding),this.updateOverlayPosition(),this.createOverlayStyles(),this.overlay}}const{onMessage:o}=browser.runtime;let i;async function s(e){let o;"object"==typeof e?(o=e,localStorage.setItem("layoutLensState",JSON.stringify(e))):o=await JSON.parse(localStorage.getItem("layoutLensState"))||t,a(),o.appToggle&&l(o)}s(),o.addListener((t=>s(t).catch((t=>console.log(t)))));const a=()=>{i&&clearInterval(i);const t=document.querySelector(".layoutlens__container");t&&t.remove()},l=t=>{const o=document.querySelectorAll("*");let i=document.querySelector(".layoutlens__container")||document.createElement("div");i.style.opacity=t.opacity,i.classList.add("layoutlens__container"),document.body.appendChild(i),o.forEach((o=>{r.observe(o),n.observe(o),(t.tagnames[o.tagName]||t.tagnames["CUSTOM ELEMENTS"])&&i.append(new e(o,"#ffaa33","#33cc44").createOverlay())}))},r=new ResizeObserver((t=>{for(const e of t)e.contentBoxSize&&(clearTimeout(i),i=setTimeout((()=>{s()}),1))})),n=new IntersectionObserver((t=>{for(const e of t)e.isIntersecting&&(clearTimeout(i),i=setTimeout((()=>{console.log("INTERSECT"),s()}),1))}))}();
